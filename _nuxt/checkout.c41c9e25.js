import{a as g,b as y,e as C,o as d,f as h,h as t,F as m,r as k,i as _,w as p,v as S,j as b,t as l,k as w,p as I,l as x}from"./entry.47a2819d.js";const A=10,B=10,v={FBSCOPE:A,EBAYSCP:B};const T={setup(){const s=y();let o=C();return{inventory:s,cart:o}},head(){return{title:"Bounty Box: Collectibles and More - Checkout"}},data(){return{country:"Australia",promoCode:""}},computed:{cartItems(){return Object.keys(this.cart).length},shipping(){return this.country=="Australia"?10:20},promoApplied(){return this.promoCode.trim()in v},discount(){return v[this.promoCode.trim()]||0},discountTotal(){return parseFloat((this.subtotal*(1-this.discount/100)).toFixed(2))},finalTotal(){return this.cartItems>0?this.discountTotal+this.shipping:0},subtotal(){let s=0;for(let o in this.cart)s+=this.inventory[o].price*this.cart[o];return s}},methods:{modItem:function(s,o){o==0?(this.cart[s]=o,delete this.cart[s]):this.cart[s]+o>this.inventory[s].stock||(this.cart[s]+=o),localStorage.cart=JSON.stringify(this.cart)},clearCart:function(){this.cart={},localStorage.cart=JSON.stringify(this.cart)},payWithStripe:async function(){console.log("Stripe Checkout"),console.log(this.cart);let s=[];for(let a in this.cart)s.push({price:this.inventory[a].price,quantity:this.cart[a],name:a});this.shipping>0&&s.push({price:this.shipping,quantity:1,name:`Shipping (${this.country})`});const o={cart:s,success_url:window.location.origin+"/thankyou",cancel_url:window.location.origin+"/checkout"};this.promoApplied&&(o.coupon=this.promoCode.trim());const n=await(await fetch("https://api.armourscope.com/.netlify/functions/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)})).json();window.location.href=n.url},btoa:function(s){return btoa(s)}},mounted(){}},e=s=>(I("data-v-72259574"),s=s(),x(),s),O={class:"CartContainer container"},E=w('<div class="row spacing" data-v-72259574></div><div class="Header" data-v-72259574><h3 class="Heading" data-v-72259574>Shopping Cart</h3><a class="back-btn" href="/" title="Return to shopping" data-v-72259574><i class="fas fa-arrow-left" data-v-72259574></i> Continue Shopping</a></div>',2),F={class:"cartEntries"},N={class:"Cart-Items"},P={class:"image-box"},V=["href"],j=["src"],D={class:"about"},J={class:"title"},M={class:"counter"},U=["onClick"],q={class:"count"},H=["onClick"],R={class:"prices"},W={class:"amount"},Y=["onClick"],G=e(()=>t("u",null,"Remove",-1)),L=[G],z={key:0},K=e(()=>t("br",null,null,-1)),Q=e(()=>t("hr",null,null,-1)),X={class:"shipping-est row"},Z=e(()=>t("div",{class:"deliver-to col-sm-3"},"Ship to:",-1)),$=e(()=>t("option",null,"Australia",-1)),tt=e(()=>t("option",null,"International",-1)),st=[$,tt],ot=e(()=>t("hr",null,null,-1)),et={class:"shipping-est row"},it=e(()=>t("hr",null,null,-1)),ct={class:"checkout"},nt={class:"row"},at=e(()=>t("div",{class:"subtotal col"},"Sub-Total",-1)),lt={class:"cost col"},rt={class:"row"},dt={class:"total-items items col"},ht={key:0,class:"row"},_t=e(()=>t("div",{class:"col"},"Discount",-1)),ut={class:"cost col"},mt={class:"row"},pt=e(()=>t("div",{class:"col"},"Shipping",-1)),vt={class:"cost col"},ft=e(()=>t("br",null,null,-1)),gt={class:"row"},yt=e(()=>t("div",{class:"total col"},"Total",-1)),Ct={class:"total cost col"},kt=e(()=>t("hr",null,null,-1)),St={class:"checkout"},bt={style:{"text-align":"center","margin-bottom":"16px"}};function wt(s,o,f,n,a,i){return d(),h("div",O,[E,t("div",F,[(d(!0),h(m,null,k(n.cart,(r,c)=>(d(),h("div",N,[n.cart[c]>0?(d(),h(m,{key:0},[t("div",P,[t("a",{href:"/info/"+n.inventory[c].url},[t("img",{src:"/img/products/"+n.inventory[c].img},null,8,j)],8,V)]),t("div",D,[t("h3",J,l(c),1)]),t("div",M,[t("a",{class:"mod-btn fa-solid fa-circle-minus",onClick:u=>i.modItem(c,-1)},null,8,U),t("div",q,l(n.cart[c]),1),t("a",{class:"mod-btn fa-solid fa-circle-plus",onClick:u=>i.modItem(c,1)},null,8,H)]),t("div",R,[t("div",W,"$"+l(n.inventory[c].price*n.cart[c]),1),t("div",{class:"remove",onClick:u=>i.modItem(c,0)},L,8,Y)])],64)):_("",!0)]))),256))]),i.cartItems>0?(d(),h("div",z,[t("i",{class:"fas fa-trash clear-cart",onClick:o[0]||(o[0]=r=>i.clearCart())})])):_("",!0),K,Q,t("div",X,[Z,p(t("select",{"onUpdate:modelValue":o[1]||(o[1]=r=>a.country=r),class:"col form-select"},st,512),[[S,a.country]])]),ot,t("div",et,[p(t("input",{class:"form-control","onUpdate:modelValue":o[2]||(o[2]=r=>a.promoCode=r),placeholder:"Promo Code"},null,512),[[b,a.promoCode]])]),it,t("div",ct,[t("div",nt,[at,t("div",lt,"$"+l(i.subtotal),1)]),t("div",rt,[t("div",dt,l(i.cartItems)+" items",1)]),i.promoApplied?(d(),h("div",ht,[_t,t("div",ut,l(i.discount)+"% ("+l(a.promoCode.trim())+")",1)])):_("",!0),t("div",mt,[pt,t("div",vt,"$"+l(i.shipping),1)]),ft,t("div",gt,[yt,t("div",Ct,"AUD $"+l(i.finalTotal),1)])]),kt,t("div",St,[t("div",bt,[t("a",{onClick:o[3]||(o[3]=r=>i.payWithStripe()),class:"stripe-btn"}," Go to Checkout ")])])])}const xt=g(T,[["render",wt],["__scopeId","data-v-72259574"]]);export{xt as default};
