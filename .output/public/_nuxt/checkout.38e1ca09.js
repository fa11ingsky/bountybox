import{a as f,b as y,e as g,o as a,f as d,h as t,F as u,r as C,i as h,w as m,v as k,j as b,t as l,k as S}from"./entry.387fef65.js";const w=10,I=10,p={FBSCOPE:w,EBAYSCP:I};const x={setup(){const o=y();let s=g();return{inventory:o,cart:s}},head(){return{title:"Bounty Box: Collectibles and More - Checkout"}},data(){return{country:"Australia",promoCode:""}},computed:{cartItems(){return Object.keys(this.cart).length},shipping(){return this.country=="Australia"?10:20},promoApplied(){return this.promoCode.trim()in p},discount(){return p[this.promoCode.trim()]||0},discountTotal(){return parseFloat((this.subtotal*(1-this.discount/100)).toFixed(2))},finalTotal(){return this.cartItems>0?this.discountTotal+this.shipping:0},subtotal(){let o=0;for(let s in this.cart)o+=this.inventory[s].price*this.cart[s];return o}},methods:{modItem:function(o,s){s==0?(this.cart[o]=s,delete this.cart[o]):this.cart[o]+s>this.inventory[o].stock||(this.cart[o]+=s),localStorage.cart=JSON.stringify(this.cart)},clearCart:function(){this.cart={},localStorage.cart=JSON.stringify(this.cart)},payWithStripe:async function(){console.log("Stripe Checkout"),console.log(this.cart);let o=[];for(let c in this.cart)o.push({price:this.inventory[c].price,quantity:this.cart[c],name:c});this.shipping>0&&o.push({price:this.shipping,quantity:1,name:`Shipping (${this.country})`});const s={cart:o,success_url:window.location.origin+"/thankyou",cancel_url:window.location.origin+"/checkout"};this.promoApplied&&(s.coupon=this.promoCode.trim());const n=await(await fetch("https://api.armourscope.com/.netlify/functions/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).json();window.location.href=n.url},btoa:function(o){return btoa(o)}},mounted(){}},T={class:"CartContainer container"},A=t("div",{class:"Header"},[t("h3",{class:"Heading"},"Shopping Cart"),t("a",{class:"back-btn",href:"/",title:"Return to shopping"},[t("i",{class:"fas fa-arrow-left"}),S(" Continue Shopping")])],-1),B={class:"cartEntries"},O={class:"Cart-Items"},E={class:"image-box"},F=["href"],N=["src"],P={class:"about"},V={class:"title"},j={class:"counter"},D=["onClick"],J={class:"count"},M=["onClick"],U={class:"prices"},q={class:"amount"},H=["onClick"],R=t("u",null,"Remove",-1),W=[R],Y={key:0},G=t("br",null,null,-1),L=t("hr",null,null,-1),z={class:"shipping-est row"},K=t("div",{class:"deliver-to col-sm-3"},"Ship to:",-1),Q=t("option",null,"Australia",-1),X=t("option",null,"International",-1),Z=[Q,X],$=t("hr",null,null,-1),tt={class:"shipping-est row"},st=t("hr",null,null,-1),ot={class:"checkout"},et={class:"row"},it=t("div",{class:"subtotal col"},"Sub-Total",-1),nt={class:"cost col"},ct={class:"row"},lt={class:"total-items items col"},rt={key:0,class:"row"},at=t("div",{class:"col"},"Discount",-1),dt={class:"cost col"},ht={class:"row"},_t=t("div",{class:"col"},"Shipping",-1),ut={class:"cost col"},mt=t("br",null,null,-1),pt={class:"row"},vt=t("div",{class:"total col"},"Total",-1),ft={class:"total cost col"},yt=t("hr",null,null,-1),gt={class:"checkout"},Ct={style:{"text-align":"center","margin-bottom":"16px"}};function kt(o,s,v,n,c,e){return a(),d("div",T,[A,t("div",B,[(a(!0),d(u,null,C(n.cart,(r,i)=>(a(),d("div",O,[n.cart[i]>0?(a(),d(u,{key:0},[t("div",E,[t("a",{href:"/info/"+n.inventory[i].url},[t("img",{src:"/img/products/"+n.inventory[i].img},null,8,N)],8,F)]),t("div",P,[t("h3",V,l(i),1)]),t("div",j,[t("a",{class:"mod-btn fa-solid fa-circle-minus",onClick:_=>e.modItem(i,-1)},null,8,D),t("div",J,l(n.cart[i]),1),t("a",{class:"mod-btn fa-solid fa-circle-plus",onClick:_=>e.modItem(i,1)},null,8,M)]),t("div",U,[t("div",q,"$"+l(n.inventory[i].price*n.cart[i]),1),t("div",{class:"remove",onClick:_=>e.modItem(i,0)},W,8,H)])],64)):h("",!0)]))),256))]),e.cartItems>0?(a(),d("div",Y,[t("i",{class:"fas fa-trash clear-cart",onClick:s[0]||(s[0]=r=>e.clearCart())})])):h("",!0),G,L,t("div",z,[K,m(t("select",{"onUpdate:modelValue":s[1]||(s[1]=r=>c.country=r),class:"col form-select"},Z,512),[[k,c.country]])]),$,t("div",tt,[m(t("input",{class:"form-control","onUpdate:modelValue":s[2]||(s[2]=r=>c.promoCode=r),placeholder:"Promo Code"},null,512),[[b,c.promoCode]])]),st,t("div",ot,[t("div",et,[it,t("div",nt,"$"+l(e.subtotal),1)]),t("div",ct,[t("div",lt,l(e.cartItems)+" items",1)]),e.promoApplied?(a(),d("div",rt,[at,t("div",dt,l(e.discount)+"% ("+l(c.promoCode.trim())+")",1)])):h("",!0),t("div",ht,[_t,t("div",ut,"$"+l(e.shipping),1)]),mt,t("div",pt,[vt,t("div",ft,"AUD $"+l(e.finalTotal),1)])]),yt,t("div",gt,[t("div",Ct,[t("a",{onClick:s[3]||(s[3]=r=>e.payWithStripe()),class:"stripe-btn"}," Go to Checkout ")])])])}const St=f(x,[["render",kt]]);export{St as default};
