import{a as f,b as y,e as C,o as a,f as d,h as t,F as _,r as g,w as u,v as k,i as b,t as l,j as m}from"./entry.3dcbab8f.js";const S=10,w=10,v={FBSCOPE:S,EBAYSCP:w};const I={setup(){const o=y();let s=C();return{inventory:o,cart:s}},head(){return{title:"Bounty Box: Collectibles and More - Checkout"}},data(){return{country:"Australia",promoCode:""}},computed:{cartItems(){return Object.keys(this.cart).length},shipping(){return this.country=="Australia"?10:20},promoApplied(){return this.promoCode.trim()in v},discount(){return v[this.promoCode.trim()]||0},discountTotal(){return parseFloat((this.subtotal*(1-this.discount/100)).toFixed(2))},finalTotal(){return this.cartItems>0?this.discountTotal+this.shipping:0},subtotal(){let o=0;for(let s in this.cart)o+=this.inventory[s].price*this.cart[s];return o}},methods:{modItem:function(o,s){s==0?(this.cart[o]=s,delete this.cart[o]):this.cart[o]+s>this.inventory[o].stock||(this.cart[o]+=s),localStorage.cart=JSON.stringify(this.cart)},clearCart:function(){this.cart={},localStorage.cart=JSON.stringify(this.cart)},payWithStripe:async function(){console.log("Stripe Checkout"),console.log(this.cart);let o=[];for(let c in this.cart)o.push({price:this.inventory[c].price,quantity:this.cart[c],name:c});this.shipping>0&&o.push({price:this.shipping,quantity:1,name:`Shipping (${this.country})`});const s={cart:o,success_url:window.location.origin+"/thankyou",cancel_url:window.location.origin+"/checkout"};this.promoApplied&&(s.coupon=this.promoCode.trim());const n=await(await fetch("https://api.armourscope.com/.netlify/functions/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).json();window.location.href=n.url},btoa:function(o){return btoa(o)}},mounted(){}},x={class:"CartContainer container"},A={class:"Header"},B=t("h3",{class:"Heading"},"Shopping Cart",-1),T={class:"cartEntries"},O={class:"Cart-Items"},E={class:"image-box"},F=["href"],P=["src"],N={class:"about"},j={class:"title"},D={class:"counter"},V=["onClick"],J={class:"count"},M=["onClick"],U={class:"prices"},q={class:"amount"},H=["onClick"],R=t("u",null,"Remove",-1),W=[R],Y=t("hr",null,null,-1),G={class:"shipping-est row"},L=t("div",{class:"deliver-to col-sm-3"},"Ship to:",-1),z=t("option",null,"Australia",-1),K=t("option",null,"International",-1),Q=[z,K],X=t("hr",null,null,-1),Z={class:"shipping-est row"},$=t("hr",null,null,-1),tt={class:"checkout"},st={class:"row"},ot=t("div",{class:"subtotal col"},"Sub-Total",-1),et={class:"cost col"},it={class:"row"},nt={class:"total-items items col"},ct={key:0,class:"row"},lt=t("div",{class:"col"},"Discount",-1),rt={class:"cost col"},at={class:"row"},dt=t("div",{class:"col"},"Shipping",-1),ht={class:"cost col"},_t=t("br",null,null,-1),ut={class:"row"},mt=t("div",{class:"total col"},"Total",-1),vt={class:"total cost col"},pt=t("hr",null,null,-1),ft={class:"checkout"},yt={style:{"text-align":"center","margin-bottom":"16px"}};function Ct(o,s,p,n,c,e){return a(),d("div",x,[t("div",A,[B,t("h5",{class:"Action",onClick:s[0]||(s[0]=r=>e.clearCart())},"Remove all")]),t("div",T,[(a(!0),d(_,null,g(n.cart,(r,i)=>(a(),d("div",O,[n.cart[i]>0?(a(),d(_,{key:0},[t("div",E,[t("a",{href:"/info/"+n.inventory[i].url},[t("img",{src:"/img/products/"+n.inventory[i].img},null,8,P)],8,F)]),t("div",N,[t("h3",j,l(i),1)]),t("div",D,[t("a",{class:"mod-btn fa-solid fa-circle-plus",onClick:h=>e.modItem(i,1)},null,8,V),t("div",J,l(n.cart[i]),1),t("a",{class:"mod-btn fa-solid fa-circle-minus",onClick:h=>e.modItem(i,-1)},null,8,M)]),t("div",U,[t("div",q,l(n.inventory[i].price*n.cart[i]),1),t("div",{class:"remove",onClick:h=>e.modItem(i,0)},W,8,H)])],64)):m("",!0)]))),256))]),Y,t("div",G,[L,u(t("select",{"onUpdate:modelValue":s[1]||(s[1]=r=>c.country=r),class:"col form-select"},Q,512),[[k,c.country]])]),X,t("div",Z,[u(t("input",{class:"form-control","onUpdate:modelValue":s[2]||(s[2]=r=>c.promoCode=r),placeholder:"Promo Code"},null,512),[[b,c.promoCode]])]),$,t("div",tt,[t("div",st,[ot,t("div",et,"$"+l(e.subtotal),1)]),t("div",it,[t("div",nt,l(e.cartItems)+" items",1)]),e.promoApplied?(a(),d("div",ct,[lt,t("div",rt,l(e.discount)+"% ("+l(c.promoCode.trim())+")",1)])):m("",!0),t("div",at,[dt,t("div",ht,"$"+l(e.shipping),1)]),_t,t("div",ut,[mt,t("div",vt,"AUD $"+l(e.finalTotal),1)])]),pt,t("div",ft,[t("div",yt,[t("a",{onClick:s[3]||(s[3]=r=>e.payWithStripe()),class:"stripe-btn"}," Go to Checkout ")])])])}const kt=f(I,[["render",Ct]]);export{kt as default};
